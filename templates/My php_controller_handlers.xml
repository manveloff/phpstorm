<templateSet group="My php-controller-handlers">
  <template name="create" value="//|----------------------------------&#10;//| POST-API1. Создать новую сущность&#10;//|----------------------------------&#10;//|&#10;//|   &gt; Триггер&#10;//|     - operation == 1&#10;//|&#10;//|   &gt; Описание параметров&#10;//|     - operation   | содержит код операции&#10;//|     - data        | объект с данными от клиента&#10;//|&#10;//|   &gt; Обеспечение целостности операций&#10;//|     - Присутствует.&#10;//|     - Реализовано с помощью транзакций.&#10;//|&#10;&#10;if(Input::get('operation') == 1) {&#10;&#10;  // 1. Получить присланные данные&#10;&#10;    // Получить данные data&#10;    $data = Input::get('data');   // массив&#10;&#10;&#10;  // 2. Выполнить задачу&#10;&#10;    // Применить команду&#10;    $result = runcommand('\M1\Documents\Main\Commands\C1_new', $data);&#10;&#10;    // Если $errors != 0&#10;    // - Сохранить её в лог&#10;    // - Вернуть неудачу.&#10;    if(!empty($result['error'])) {&#10;      write2log('При создании новой сущности, в модуле M1 возникла ошибка: '.$result['error'], ['M1', 'Ошибка']);&#10;      return Response::make(json_encode(array(&quot;result&quot; =&gt; 'fail'), JSON_UNESCAPED_UNICODE));&#10;    }&#10;&#10;&#10;  // N. Вернуть результаты&#10;  return Response::make(json_encode(array(&#10;    'result'          =&gt;  'success',&#10;    'id'              =&gt;  $result['id']&#10;  ), JSON_UNESCAPED_UNICODE));&#10;&#10;}" description="Шаблон php-обработчика в контроллере для создания новой сущности" toReformat="false" toShortenFQNames="true">
    <context>
      <option name="JSP" value="false" />
      <option name="PHP" value="true" />
    </context>
  </template>
  <template name="delete" value="//|----------------------------&#10;//| POST-API1. Удалить сущность&#10;//|----------------------------&#10;//|&#10;//|   &gt; Триггер&#10;//|     - operation == 1&#10;//|&#10;//|   &gt; Описание параметров&#10;//|     - operation   | содержит код операции&#10;//|     - data        | объект с данными от клиента&#10;//|&#10;//|   &gt; Обеспечение целостности операций&#10;//|     - Присутствует.&#10;//|     - Реализовано с помощью транзакций.&#10;//|&#10;&#10;if(Input::get('operation') == 1) {&#10;&#10;  // 1. Получить присланные данные&#10;&#10;    // Получить данные data&#10;    $data = Input::get('data');   // массив&#10;&#10;&#10;  // 2. Выполнить задачу&#10;&#10;    // Применить команду&#10;    $error = runcommand('\M1\Documents\Main\Commands\C1_del', $data);&#10;&#10;    // Если $errors != 0&#10;    // - Сохранить её в лог&#10;    // - Вернуть неудачу.&#10;    if(!empty($error)) {&#10;      write2log('При удалении сущности, в модуле M1 возникла ошибка: '.$error, ['M1', 'Ошибка']);&#10;      return Response::make(json_encode(array(&quot;result&quot; =&gt; 'fail'), JSON_UNESCAPED_UNICODE));&#10;    }&#10;&#10;&#10;  // N. Вернуть сообщение об успехе, и данные созданного каталога клиенту&#10;  return Response::make(json_encode(array(&#10;    'result'          =&gt;  'success',&#10;    'timestamp'       =&gt; $data['timestamp'],&#10;  ), JSON_UNESCAPED_UNICODE));&#10;&#10;}" description="Шаблон php-обработчика в контроллере для удаления новой сущности" toReformat="false" toShortenFQNames="true">
    <context>
      <option name="JSP" value="false" />
      <option name="PHP" value="true" />
    </context>
  </template>
  <template name="save" value="//|------------------------------------&#10;//| POST-API1. Сохранить св-ва сущности&#10;//|------------------------------------&#10;//|&#10;//|   &gt; Триггер&#10;//|     - operation == 1&#10;//|&#10;//|   &gt; Описание параметров&#10;//|     - operation   | содержит код операции&#10;//|     - data        | объект с данными от клиента&#10;//|&#10;//|   &gt; Обеспечение целостности операций&#10;//|     - Присутствует.&#10;//|     - Реализовано с помощью транзакций.&#10;//|&#10;&#10;if(Input::get('operation') == 1) {&#10;&#10;  // 1. Получить присланные данные&#10;&#10;    // Получить данные data&#10;    $data = Input::get('data');   // массив&#10;&#10;&#10;  // 2. Выполнить команду&#10;&#10;    // Применить команду&#10;    // - И передать ей данные $data&#10;    $errors = runcommand('\M1\Documents\Main\Commands\C1_save', $data);&#10;&#10;    // Если $errors != 0&#10;    // - Сохранить её в лог&#10;    // - Вернуть неудачу.&#10;    if(!empty($errors)) {&#10;      write2log('При сохраннии свойств сущности модуля M1 в БД возникла ошибка: '.$errors, ['M1', 'Ошибка']);&#10;      return Response::make(json_encode(array(&quot;result&quot; =&gt; 'fail', &quot;errorMsgs&quot; =&gt; $errors), JSON_UNESCAPED_UNICODE));&#10;    }&#10;&#10;&#10;  // N. Вернуть сообщение об успехе, и данные созданного каталога клиенту&#10;  return Response::make(json_encode(array(&#10;    'result'          =&gt;'success',&#10;  ), JSON_UNESCAPED_UNICODE));&#10;&#10;} " description="Шаблон php-обработчика в контроллере для сохранения св-в сущности" toReformat="false" toShortenFQNames="true">
    <context>
      <option name="JSP" value="false" />
      <option name="PHP" value="true" />
    </context>
  </template>
  <template name="update" value="//|---------------------------------------&#10;//| POST-API1. Обновить сущность в клиенте&#10;//|---------------------------------------&#10;//|&#10;//|   &gt; Триггер&#10;//|     - operation == 1&#10;//|&#10;//|   &gt; Описание параметров&#10;//|     - operation   | содержит код операции&#10;//|     - data        | объект с данными от клиента&#10;//|&#10;//|   &gt; Обеспечение целостности операций&#10;//|     - Не требуется.&#10;//|&#10;&#10;if(Input::get('operation') == 1) {&#10;&#10;  // 1. Получить присланные данные&#10;&#10;    // Получить данные data&#10;    $data = Input::get('data');   // массив&#10;&#10;&#10;  // 2. Получить все сущности&#10;  $result = runcommand('\M1\Documents\Main\Commands\C1_get_essences', $data);&#10;&#10;&#10;  // N. Вернуть сообщение об успехе, и данные созданного каталога клиенту&#10;  return Response::make(json_encode(array(&#10;    'result'          =&gt; 'success',&#10;    'timestamp'       =&gt; $data['timestamp'],&#10;    'essences'          =&gt; $result['essences']&#10;  ), JSON_UNESCAPED_UNICODE));&#10;&#10;}" description="Шаблон php-обработчика в контроллере для обновления сущности в клиенте" toReformat="false" toShortenFQNames="true">
    <context>
      <option name="JSP" value="false" />
      <option name="PHP" value="true" />
    </context>
  </template>
</templateSet>